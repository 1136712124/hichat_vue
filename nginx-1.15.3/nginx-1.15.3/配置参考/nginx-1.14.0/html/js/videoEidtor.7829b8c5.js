(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["videoEidtor"],{"1d7c":function(e,t,i){},"268f":function(e,t,i){e.exports=i("fde4")},"2c5a":function(e,t,i){},"2f21":function(e,t,i){"use strict";var n=i("79e5");e.exports=function(e,t){return!!e&&n(function(){t?e.call(null,function(){},1):e.call(null)})}},"305b":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"edit-header"},[e._m(0),i("div",{staticClass:"operation"},[i("el-button",[e._v("重置")]),i("el-button",{attrs:{type:"warning"}},[e._v("保存")]),i("el-button",{attrs:{type:"primary",disabled:!e.showCursor},on:{click:e.createVideo}},[e._v("生成视频")])],1)]),i("div",{staticClass:"video-add"},[i("div",{staticClass:"video-add-left"},[i("div",{ref:"playerDom",attrs:{id:"play-dom"}})]),i("div",{staticClass:"video-add-right"},[i("div",{staticClass:"add-wrapper"},[i("el-tabs",{on:{"tab-click":e.handleTabClick},model:{value:e.activeLabel,callback:function(t){e.activeLabel=t},expression:"activeLabel"}},[e.showCursor?i("el-tab-pane",{attrs:{name:"edit"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"el-icon-magic-stick"}),e._v("视频美化")]),i("div",[i("el-checkbox",{model:{value:e.showTextInVideo,callback:function(t){e.showTextInVideo=t},expression:"showTextInVideo"}},[e._v("启用文字")]),i("el-checkbox",{model:{value:e.showImgInVideo,callback:function(t){e.showImgInVideo=t},expression:"showImgInVideo"}},[e._v("启用遮标")])],1)]):i("el-tab-pane",{attrs:{name:"source"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"el-icon-film"}),e._v("视频素材")]),i("div",{staticClass:"video-list"},[i("div",{staticClass:"add-btn",on:{click:e.toggleDialog}},[e._v("\n                                添加视频\n                            ")]),e._l(e.checkedVideo,function(t){return i("div",{staticClass:"added-list",attrs:{draggable:"true"},on:{dragstart:function(i){return e.addToEidt(i,t)}}},[i("img",{attrs:{src:t.coverUrl}})])})],2)])],1)],1)])]),i("div",{staticClass:"video-edit"},[e._m(1),i("div",{ref:"edit",staticClass:"timeline-edit-container",on:{dragover:e.dragging,click:e.showReactBox}},[e.showCursor?i("div",{staticClass:"top-wrapper",style:{left:e.currentLeftMark+"px",width:e.currentRightMark-e.currentLeftMark+"px"}}):e._e(),e.showCursor?i("div",{staticClass:"bottom-wrapper",style:{left:e.currentLeftMark+"px",width:e.currentRightMark-e.currentLeftMark+"px"}}):e._e(),e.showCursor?i("div",{staticClass:"left-wrapper",style:{left:e.currentLeftMark+"px"},on:{click:e.doCut}}):e._e(),e.showCursor?i("div",{staticClass:"right-wrapper",style:{left:e.currentRightMark+"px"},on:{click:e.doCut}}):e._e(),e.showCut?e._l(e.marks,function(e){return i("div",{key:e,staticClass:"mark",style:{left:e+"px"}},[i("i",{staticClass:"el-icon-scissors"})])}):e._e(),e.showCursor?[i("div",{staticClass:"playingPoint",style:{left:e.playingPoint+"px"}})]:e._e(),e.showCut?i("div",{staticClass:"play-line-container",style:e.playLinePosition,attrs:{draggable:"true"},on:{dragstart:e.dragStart,dragend:e.dragEnd,click:e.stopClickPropagation}},[i("div",{staticClass:"play-line-cut",on:{click:e.mark}},[i("div",{staticClass:"play-line-cut-img"})]),i("div",{staticClass:"play-line"}),i("div",{staticClass:"play-line-time"},[e._v(e._s(e.currentPoint))])]):e._e(),i("div",{staticClass:"time-ruler",style:{width:1e3*e.videoEditingList.length+"px"}},[e.videoEditingList.length>0?i("div",{staticClass:"startLabel"},[i("div",{staticClass:"stick start"}),i("div",{staticClass:"rulabel start"},[e._v("00:00:00")])]):e._e(),e._l(e.videoEditingList,function(t,n){return i("div",{key:t.videoId,staticClass:"section"},[e._l(e.points,function(o){return[i("div",{staticClass:"video-snapshot",style:{left:125*(o-1+8*n)+"px"}},[i("img",{attrs:{src:t.coverUrl}})]),i("div",{staticClass:"stick",style:{left:125*(o+8*n)+"px"}}),i("div",{staticClass:"rulabel",style:{left:125*(o+8*n)-32+"px"}},[e._v(e._s(e.caculateLabel(n,o)))])]})],2)})],2)],2),i("div",{staticClass:"edit-add",on:{dragover:e.allowDrop,drop:e.drop}},[e._v("+")])]),i("el-dialog",{staticClass:"custom-dialog",attrs:{title:"添加视频",visible:e.showAddDialog,width:"50%"},on:{"update:visible":function(t){e.showAddDialog=t}}},[i("div",[i("div",{staticClass:"filter-wrapper"},[i("div",{staticClass:"search-wrapper"},[i("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入要查找的关键字"},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}},[i("i",{staticClass:"el-icon-search",attrs:{slot:"prepend"},slot:"prepend"}),i("el-button",{attrs:{slot:"append"},on:{click:e.getVideoList},slot:"append"},[e._v("确认")])],1)],1)]),i("div",{staticClass:"video-list-wrapper"},e._l(e.videoList,function(t){return i("div",{key:t.videoId,class:t.checked?"checked":"",on:{click:function(i){return e.checkItem(t)}}},[i("img",{staticClass:"video-cover",attrs:{src:t.coverUrl}})])}),0)]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAddDialog=!1}}},[e._v("确 定")])],1)]),i("el-dialog",{staticClass:"creating-video",attrs:{visible:e.creatingVideo,title:"请填写视频信息",width:"30%"},on:{"update:visible":function(t){e.creatingVideo=t}}},[i("div",[i("el-form",{ref:"videoForm",attrs:{model:e.creatingVideoForm,rules:e.creatingVideoFormRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"视频标题",prop:"Title"}},[i("el-input",{model:{value:e.creatingVideoForm.Title,callback:function(t){e.$set(e.creatingVideoForm,"Title",t)},expression:"creatingVideoForm.Title"}})],1),i("el-form-item",{attrs:{label:"视频描述",prop:"Description"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.creatingVideoForm.Description,callback:function(t){e.$set(e.creatingVideoForm,"Description",t)},expression:"creatingVideoForm.Description"}})],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.creating?e._e():i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.creatingVideo=!1}}},[e._v("取消")]),i("el-button",{attrs:{type:"primary",loading:e.creating},on:{click:e.submitCreatingForm}},[e._v("确 定")])],1)])],1)},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"title"},[i("span",[e._v("视频编辑")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"edit-logo"},[n("img",{attrs:{src:i("b048")}})])}],a=(i("ac6a"),i("7734")),s={name:"video-editor",data:function(){return{loading:!1,searchKey:"",showAddDialog:!1,playLinePosition:{left:"0px"},down:!1,startPointX:0,baseOffset:0,videoList:[],videoEditingList:[],marks:[],totalDuration:0,points:[1,2,3,4,5,6,7,8],currentPoint:"00:00:00",currentLeftMark:0,currentRightMark:0,showCursor:!1,showCut:!1,player:null,videoStartIndex:0,videoEndIndex:0,currentPlayingPoint:0,videoIn:0,videoOut:0,playingPoint:0,currentPlayingIndex:0,showTextInVideo:!1,showImgInVideo:!1,creatingVideo:!1,creatingVideoForm:{Title:"",Description:""},creatingVideoFormRules:{Title:[{required:!0,message:"请输入视频标题",trigger:"blur"}],Description:[{required:!0,message:"请输入视频描述",trigger:"blur"},{min:5,max:20,message:"长度在 5 到 20 个字符",trigger:"blur"}]},creating:!1}},created:function(){this.getVideoList()},methods:{stopClickPropagation:function(e){e.stopPropagation()},handleTabClick:function(){},toggleDialog:function(){this.showAddDialog=!this.showAddDialog},getVideoList:function(){var e=this;this.loading=!0;var t={queryConds:[],sortConds:[{sortFieldName:"heat",sortRule:"ASC"}],videoKind:"material"};t.queryConds.push({key:"filterStr",value:this.searchKey}),this.$http.post("/videoinfo/filters",t).then(function(t){"success"===t.data.code?(e.videoList=[],t.data.data.videoInfos.forEach(function(t){t.hasOwnProperty("checked")||(t.checked=!1),e.videoList.push(t)}),e.loading=!1):(e.$notify({title:"获取视频列表错误",type:"error",message:t.data.msg}),e.loading=!1)}).catch(function(t){e.loading=!1,e.$notify({title:"获取视频列表错误",type:"error",message:t.message})})},mark:function(e){var t=this,i=this.marks.some(function(e){return e===t.baseOffset});i||this.marks.push(this.baseOffset),console.log(this.marks)},dragStart:function(e){var t=new Image;e.dropEffect="move",e.dataTransfer.setDragImage(t,0,0),this.startPointX=e.x},dragging:function(e){this.allowDrop(e);var t=e.x-this.startPointX,i=this.baseOffset+t,n=this.$refs.edit.getClientRects()[0].width;if(i<0&&(i=0),i>n&&(i=n),n>0){var o=this.totalDuration*(i/n);this.currentPoint=a["b"].formatTime(o)}this.playLinePosition.left=i+"px",this.baseOffset=parseInt(this.playLinePosition.left),this.startPointX=e.x},dragEnd:function(e){},checkItem:function(e){e.checked?e.checked=!1:e.checked=!0},addToEidt:function(e,t){e.dataTransfer.dropEffect="move",e.dataTransfer.setData("Text",t.videoId)},allowDrop:function(e){e.preventDefault()},drop:function(e){var t=this,i=e.dataTransfer.getData("Text");this.videoList.forEach(function(e){e.videoId==i&&(t.videoEditingList.push(e),t.totalDuration+=e.duration)}),this.showCut=!0},caculateLabel:function(e,t){var i=this.perDuration*(t+8*e);return a["b"].formatTime(i)},showReactBox:function(e){var t=this.$refs.edit.getBoundingClientRect().x,i=this.$refs.edit.getBoundingClientRect().y;if(e.y-i<=90){this.showCursor=!0,this.showCut=!1;var n=e.x-t;this.findNearMark(n),this.initPlayer()}else this.showCursor=!1,this.showCut=!0},findNearMark:function(e){var t,i,n,o=void 0,a=void 0;this.marks.forEach(function(s){s<e?(n=e-s,o&&n<o&&(o=n,t=s),o||(o=n,t=s)):(n=s-e,a&&n<a&&(a=n,i=s),a||(a=n,i=s))}),t||(t=0),i||(i=1e3*this.videoEditingList.length),this.currentLeftMark=t,this.currentRightMark=i,console.log("left:"+t),console.log("right:"+i),console.log(this.marks)},initPlayer:function(){var e=this;this.videoStartIndex=parseInt(this.currentLeftMark/1e3),this.videoEndIndex=parseInt(this.currentRightMark/1e3),this.currentRightMark%1e3===0&&(this.videoEndIndex=this.videoEndIndex-1);var t=this.currentLeftMark%1e3,i=this.currentRightMark%1e3,n=1e3*this.videoEditingList.length;this.videoIn=t/n*this.totalDuration,this.videoOut=i/n*this.totalDuration,this.currentPlayingIndex=this.videoStartIndex;var o={id:"play-dom",width:"100%",height:"100%",autoplay:!0,rePlay:!1,source:this.videoEditingList[this.currentPlayingIndex].url,cover:this.videoEditingList[this.currentPlayingIndex].coverUrl};this.player?this.player.loadByUrl(this.videoEditingList[this.currentPlayingIndex].url):(this.player=new Aliplayer(o),this.player.on("timeupdate",function(t){e.playingPoint=e.player.getCurrentTime()*(n/e.totalDuration)+1e3*e.currentPlayingIndex,e.currentPlayingIndex===e.videoEndIndex&&e.player.getCurrentTime()>e.videoOut&&e.player.pause()}),this.player.on("ready",function(t){e.currentPlayingIndex===e.videoStartIndex&&e.player.seek(e.videoIn)}),this.player.on("ended",function(t){e.currentPlayingIndex<e.videoEndIndex&&(e.currentPlayingIndex++,e.player.loadByUrl(e.videoEditingList[e.currentPlayingIndex].url))}))},doCut:function(e){this.stopClickPropagation(e),this.toggleCutPanel()},toggleCutPanel:function(){this.showCutPanel=!this.showCutPanel},createVideo:function(){this.creatingVideo=!0},submitCreatingForm:function(){var e=this;this.$refs.videoForm.validate(function(t){if(t){e.creating=!0;for(var i={mediaMetadata:{mediaMetadata:e.creatingVideoForm}},n={VideoTracks:[{VideoTrackClips:[]}]},o=e.videoStartIndex;o<=e.videoEndIndex;o++){var a={};a.MediaId=e.videoEditingList[o].videoId,o===e.videoStartIndex&&(a.In=e.videoIn),o===e.videoEndIndex&&0!==e.videoOut&&(a.Out=e.videoOut),n.VideoTracks[0].VideoTrackClips.push(a)}i.timeline=n,i.produceConfig={TemplateGroupId:null},e.$http.post("/videoedits",i).then(function(t){"success"===t.data.code?(e.creatingVideo=!1,e.creating=!1,e.$router.push("/main/videoInfo")):(e.$notify({title:"视频生成错误",type:"error",message:t.data.msg}),e.creatingVideo=!1,e.creating=!1)}).catch(function(t){e.creatingVideo=!1,e.creating=!1,e.$notify({title:"视频生成错误",type:"error",message:t.message})})}})}},computed:{checkedVideo:function(){return this.videoList.filter(function(e){return e.checked})},perDuration:function(){return this.videoEditingList.length>0?this.totalDuration/(8*this.videoEditingList.length):0},activeLabel:{get:function(){return this.showCursor?"edit":"source"},set:function(){}}}},l=s,r=(i("a18a"),i("2877")),d=Object(r["a"])(l,n,o,!1,null,"bdc85368",null);t["default"]=d.exports},"32a6":function(e,t,i){var n=i("241e"),o=i("c3a1");i("ce7e")("keys",function(){return function(e){return o(n(e))}})},"454f":function(e,t,i){i("46a7");var n=i("584a").Object;e.exports=function(e,t,i){return n.defineProperty(e,t,i)}},"456d":function(e,t,i){var n=i("4bf8"),o=i("0d58");i("5eda")("keys",function(){return function(e){return o(n(e))}})},"46a7":function(e,t,i){var n=i("63b6");n(n.S+n.F*!i("8e60"),"Object",{defineProperty:i("d9f6").f})},"50d1":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAACzVBMVEVHcEznEkDnEj/nEkDmEj//AADnET/nEj/nEkDrFDvnET/nEUD/AEDnEkDhDzznEj/nEj/nEj/mADPoEj/nEUDnET/nEj/oDz7nET/mET/nET/vEEDnEkD/ADPmEkDoEkDnEkDnET/qC0DjADnnEj/nEkDnEUDoDDrnET/nEUD/AADoET7nEEDoEkDkDTbnEkDnEj/oEUDoET/oEkDoEj/rFDvqFUDmEj/uEUTbEjfoEj/nEj/nEUCAAADmEj/nEj/bAEnnET/mET7fAEDoEUDnEkDoEUDnET/nEj/mDUDnEj/nEkHoEj/nEj/oD0HnEj/lED7gDz7nEkDnEUDnEUDpEUDpC0PmEj/jDjnnEkDmED/nEUDsEz/nEj/nET/kDUPnED/mEUDmEkDYFDvnET/mED7oDz7mET//AEnpDz/lEj/nEj/nET/nET/nEkDfC0DnEkDmEkDqDj7lDz3nEEDlD0DnEkDpEUDnEj/nEkDnEUDoET/qDkDoEUDnEz/jEznmET7pDzrmEj3oET/oEkDnET/mEkDoET/UACroEj/nEUHoEUDnEj/nED7nEkDnEkDmEkDtEjfoEkDiCjvmET/nEj/qEUDnEkDMADPkEDzoEj/oF0brCjvmEELoET/nEj/nEUDnEj/mEj7wDzznEUHnEj/nEUDlET/bACTpEj/nET/mETuqAADmET/oEkDlE0DuAEThDzzoET/hEj3nEEDkD0HoEUDoEUDmET/nEUDnET/mE0DiFDvrFD3mET//AADnET/mEUDnET/UAEDmEUDmEkDlEUHnEkDoD0PnEUDnET/nET/nEj/nEUDoED7nEkDoED/oET/mEj/oEkDnEj/nET/nET/oD0LmEUDnEkDnD0D/AFXmEUDpEEDnEkDpED/mET/nET/nEkDgCj3nEj7mEj/mEDrnDEHoEj/oEUDnEUDmET7uETvnET/nEkD8gaxNAAAA7nRSTlMA/v30ggHq/vMN7fwE4BHl5tUK5uvd6SH5+ZUQgAWDV3/6GAni8OwWaeADLWDkE/f2/JmD2hoM4g8O8bb4ArrxB4lmCPug+tG9FIIrZfJDgU4h09y/aBf3EtZdiDXD/RNBr/cNaj5C7QdFReGWwtcYq+8lMqtE9lth6PrSJISJG1ojR7LvkuSmBuVKsLVf2Oe4Drsahrc88gUvxgsaH1n1wMlGEZaNtFkHOcEeA6bHRA8ipSqMQ1jEhYvSKBoZoQLO+KIM77s74yJszXWt8E5zbd2uOMa2oULQ31QDxFC8fe7u1BlW4x8rrq/7hx6y6bPcGQAAAoVJREFUOMtjYEABh08EKJw5wCvGpuJuvXPbbgtWBlxgv+ex00ePHznI/g4I2CXshbfL+SnxYFdruWgf71mmd0iAnYO/WV4Pi+la2saiku8wADe/VIIDulrlzFyOd1hBkqCOBapazhRBw3c4AKOAXBiy2mQnc8Z3uAFXtDpCrbNG9ju8QE2BD+63rLx3BIBAqBBUsXZsHCHFjCZNkBC0rOV4RxC4rd0DUmu7XpSdsOJ3IieVgYo9DykSofYd+5VAoOLLvOjC2FWz3brNIHTeHkWMeZZHP9b4kbimxBBoh5J2mOxmzpk3ScQFi+rg6wznVFANnjKbYcbc3kQxJgzFqv4MXqooItMVzID+kFWKClHjRnfHVYZLNigiHCyc4MCXFa/oFkE1ndGd4RQ7VsUMDB2mPgvYUEwXZUALOIRiBoYVq5cvm48k18lQiVsxAwOP90LkkGYQw6eYQXwVimJz3IpZF69cyoWcThl2MeJQzDpx2hJRZmTv8zJYK2JXHJFW16ePausjhi2+qIplQJFiyxcjpcmMFimvPBjkhdEUA/MPX6lUZDhGdPs6MmxehxIrku2NesWtmvpYEtLTuwwbdqBYx85V4FptgC2Jurx8xsC6lR9VsEoCe+J/4AMsxib3MBGTrd4JPgdFqbwuIxFqrbzAYRqfY0NEfp2wEVJwpAoSLgvaGqCleoYOPyG1hSzwwk5ajgu/2jKjekRKzHdMx6fWoKQGOd2qywjjVttiVIRar0hrmOAoxbh1jU3RKxWhrk0i2ALFamq5NGZ1tWbvhTtiaPUVN1eQv7gs1opQWfyJa/BDSZj5bqoqL5y8OXHWsTyP/e6/vXFRgI1N+GbQvdcBb5xRpAFzrKYODVbBAwAAAABJRU5ErkJggg=="},"55dd":function(e,t,i){"use strict";var n=i("5ca1"),o=i("d8e8"),a=i("4bf8"),s=i("79e5"),l=[].sort,r=[1,2,3];n(n.P+n.F*(s(function(){r.sort(void 0)})||!s(function(){r.sort(null)})||!i("2f21")(l)),"Array",{sort:function(e){return void 0===e?l.call(a(this)):l.call(a(this),o(e))}})},"5eda":function(e,t,i){var n=i("5ca1"),o=i("8378"),a=i("79e5");e.exports=function(e,t){var i=(o.Object||{})[e]||Object[e],s={};s[e]=t(i),n(n.S+n.F*a(function(){i(1)}),"Object",s)}},6383:function(e,t,i){},"6ca4":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page-wrapper"},[e._m(0),i("div",{staticClass:"body-wrapper"},[i("el-tabs",{staticClass:"video-lib-tabs",attrs:{"tab-position":"left"},on:{"tab-click":e.handleClick},model:{value:e.activeLib,callback:function(t){e.activeLib=t},expression:"activeLib"}},[i("el-tab-pane",{attrs:{label:"我的视频",name:"video"}},[i("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeVideoType,callback:function(t){e.activeVideoType=t},expression:"activeVideoType"}},[i("el-tab-pane",{attrs:{label:"视频列表",name:"list"}}),i("el-tab-pane",{attrs:{label:"上传列表",name:"upload"}}),"upload"===e.activeVideoType?[i("el-button",{staticClass:"upload-video",attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.toggleUploadDialog}},[e._v("添加视频\n\n                        ")]),i("div",{staticClass:"uploading-table"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.uploadings,border:""}},[i("el-table-column",{attrs:{prop:"name",label:"文件名",width:"180"}}),i("el-table-column",{attrs:{prop:"type",label:"格式",width:"180"}}),i("el-table-column",{attrs:{prop:"size",label:"大小"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(parseInt(t.row.size/1e6))+"MB")])]}}],null,!1,3756315551)}),i("el-table-column",{attrs:{label:"分类"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.cateId))])]}}],null,!1,2195935704)}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("el-progress",{attrs:{percentage:e.row.percentage}})]}}],null,!1,3200334544)})],1)],1)]:e._e(),"list"===e.activeVideoType?[i("div",{staticClass:"video-list-wrapper"},e._l(e.videoListModel,function(t){return i("div",{staticClass:"video-list",on:{click:function(i){return e.playVideo(t)}}},[i("el-card",{staticClass:"video-card"},[i("div",{staticClass:"cover"},[i("img",{attrs:{src:t.coverUrl}})]),i("div",{staticClass:"title"},[i("span",{attrs:{alt:"asdsf"}},[e._v(e._s(t.title))])]),i("div",{staticClass:"abstract"},[i("span",[e._v(e._s(t.abstract))])]),i("el-divider"),i("div",{staticClass:"info"},[i("div",{staticClass:"duration"},[i("i",{staticClass:"el-icon-time"}),i("span",[e._v(e._s(e.transTime(t)))])]),i("div",{staticClass:"heat"},[i("el-rate",{attrs:{disabled:"","show-score":"",colors:e.heatColors},model:{value:t.heat,callback:function(i){e.$set(t,"heat",i)},expression:"video.heat"}})],1)])],1)],1)}),0)]:e._e()],2)],1),i("el-tab-pane",{attrs:{label:"我的图片",name:"picture"}}),i("el-tab-pane",{attrs:{label:"我的收藏",name:"marked"}})],1),i("el-dialog",{staticClass:"upload-choice",attrs:{title:"添加上传视频",visible:e.showUploadDialog},on:{"update:visible":function(t){e.showUploadDialog=t}}},[i("div",[i("div",[i("el-button",{attrs:{type:"primary"},on:{click:e.clickInput}},[e._v("添加视频文件\n                        "),i("input",{ref:"videoUploader",staticClass:"upload-video",attrs:{type:"file",name:"file",id:"files",multiple:""},on:{change:e.filesChange}})])],1),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.toUploadList,height:"250",border:""}},[i("el-table-column",{attrs:{prop:"name",label:"文件名",width:"180"}}),i("el-table-column",{attrs:{prop:"type",label:"格式",width:"180"}}),i("el-table-column",{attrs:{prop:"size",label:"大小"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(parseInt(t.row.size/1e6))+"MB")])]}}])}),i("el-table-column",{attrs:{prop:"cate",label:"分类"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-select",{attrs:{placeholder:"分类"},on:{change:function(i){return e.changType(i,t.row,t.$index)}},model:{value:t.row.cateId,callback:function(i){e.$set(t.row,"cateId",i)},expression:"scope.row.cateId"}},e._l(e.videoTypes,function(e){return i("el-option",{key:e.cateId,attrs:{label:e.cateName,value:e.cateId}})}),1)]}}])}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.toggleUploadDialog}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.addUpload}},[e._v("上传")])],1)])],1)])},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"title-wrapper",staticStyle:{padding:"50px 20px 0px 20px"}},[i("div",{staticClass:"title"},[e._v("我的素材库")])])}],a=(i("7f7f"),i("ac6a"),i("7734")),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"dialog-fade"},on:{"after-enter":e.afterEnter,"after-leave":e.afterLeave}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-dialog__wrapper",on:{click:function(t){return t.target!==t.currentTarget?null:e.handleWrapperClick(t)}}},[i("div",{ref:"dialog",staticClass:"el-dialog",class:[{"is-fullscreen":e.fullscreen,"el-dialog--center":e.center},e.customClass],style:e.style,attrs:{role:"dialog","aria-modal":"true","aria-label":e.title||"dialog"}},[i("div",{staticClass:"el-dialog__header"},[e._t("title",[i("span",{staticClass:"el-dialog__title"},[e._v(e._s(e.title))])]),e.showClose?i("button",{staticClass:"el-dialog__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:e.handleClose}},[i("i",{staticClass:"el-dialog__close el-icon el-icon-close"})]):e._e()],2),e.rendered?i("div",{staticClass:"el-dialog__body"},[e._t("default")],2):e._e(),e.$slots.footer?i("div",{staticClass:"el-dialog__footer"},[e._t("footer")],2):e._e()])])])},l=[],r=i("2b0e"),d=function(e){for(let t=1,i=arguments.length;t<i;t++){let i=arguments[t]||{};for(let t in i)if(i.hasOwnProperty(t)){let n=i[t];void 0!==n&&(e[t]=n)}}return e};const c=r["default"].prototype.$isServer,u=/([\:\-\_]+(.))/g,p=/^moz([A-Z])/,h=c?0:Number(document.documentMode),f=function(e){return(e||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")},m=function(e){return e.replace(u,function(e,t,i,n){return n?i.toUpperCase():i}).replace(p,"Moz$1")};(function(){!c&&document.addEventListener})(),function(){!c&&document.removeEventListener}();function g(e,t){if(!e||!t)return!1;if(-1!==t.indexOf(" "))throw new Error("className should not contain space.");return e.classList?e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}function v(e,t){if(e){for(var i=e.className,n=(t||"").split(" "),o=0,a=n.length;o<a;o++){var s=n[o];s&&(e.classList?e.classList.add(s):g(e,s)||(i+=" "+s))}e.classList||(e.className=i)}}function A(e,t){if(e&&t){for(var i=t.split(" "),n=" "+e.className+" ",o=0,a=i.length;o<a;o++){var s=i[o];s&&(e.classList?e.classList.remove(s):g(e,s)&&(n=n.replace(" "+s+" "," ")))}e.classList||(e.className=f(n))}}const y=h<9?function(e,t){if(!c){if(!e||!t)return null;t=m(t),"float"===t&&(t="styleFloat");try{switch(t){case"opacity":try{return e.filters.item("alpha").opacity/100}catch(i){return 1}default:return e.style[t]||e.currentStyle?e.currentStyle[t]:null}}catch(i){return e.style[t]}}}:function(e,t){if(!c){if(!e||!t)return null;t=m(t),"float"===t&&(t="cssFloat");try{var i=document.defaultView.getComputedStyle(e,"");return e.style[t]||i?i[t]:null}catch(n){return e.style[t]}}};let E=!1,b=!1,C=2e3;const k=function(){if(r["default"].prototype.$isServer)return;let e=D.modalDom;return e?E=!0:(E=!1,e=document.createElement("div"),D.modalDom=e,e.addEventListener("touchmove",function(e){e.preventDefault(),e.stopPropagation()}),e.addEventListener("click",function(){D.doOnModalClick&&D.doOnModalClick()})),e},B={},D={modalFade:!0,getInstance:function(e){return B[e]},register:function(e,t){e&&t&&(B[e]=t)},deregister:function(e){e&&(B[e]=null,delete B[e])},nextZIndex:function(){return D.zIndex++},modalStack:[],doOnModalClick:function(){const e=D.modalStack[D.modalStack.length-1];if(!e)return;const t=D.getInstance(e.id);t&&t.closeOnClickModal&&t.close()},openModal:function(e,t,i,n,o){if(r["default"].prototype.$isServer)return;if(!e||void 0===t)return;this.modalFade=o;const a=this.modalStack;for(let l=0,r=a.length;l<r;l++){const t=a[l];if(t.id===e)return}const s=k();if(v(s,"v-modal"),this.modalFade&&!E&&v(s,"v-modal-enter"),n){let e=n.trim().split(/\s+/);e.forEach(e=>v(s,e))}setTimeout(()=>{A(s,"v-modal-enter")},200),i&&i.parentNode&&11!==i.parentNode.nodeType?i.parentNode.appendChild(s):document.body.appendChild(s),t&&(s.style.zIndex=t),s.tabIndex=0,s.style.display="",this.modalStack.push({id:e,zIndex:t,modalClass:n})},closeModal:function(e){const t=this.modalStack,i=k();if(t.length>0){const n=t[t.length-1];if(n.id===e){if(n.modalClass){let e=n.modalClass.trim().split(/\s+/);e.forEach(e=>A(i,e))}t.pop(),t.length>0&&(i.style.zIndex=t[t.length-1].zIndex)}else for(let i=t.length-1;i>=0;i--)if(t[i].id===e){t.splice(i,1);break}}0===t.length&&(this.modalFade&&v(i,"v-modal-leave"),setTimeout(()=>{0===t.length&&(i.parentNode&&i.parentNode.removeChild(i),i.style.display="none",D.modalDom=void 0),A(i,"v-modal-leave")},200))}};Object.defineProperty(D,"zIndex",{configurable:!0,get(){return b||(C=(r["default"].prototype.$ELEMENT||{}).zIndex||C,b=!0),C},set(e){C=e}});const x=function(){if(!r["default"].prototype.$isServer&&D.modalStack.length>0){const e=D.modalStack[D.modalStack.length-1];if(!e)return;const t=D.getInstance(e.id);return t}};r["default"].prototype.$isServer||window.addEventListener("keydown",function(e){if(27===e.keyCode){const e=x();e&&e.closeOnPressEscape&&(e.handleClose?e.handleClose():e.handleAction?e.handleAction("cancel"):e.close())}});var L=D;let I;var T=function(){if(r["default"].prototype.$isServer)return 0;if(void 0!==I)return I;const e=document.createElement("div");e.className="el-scrollbar__wrap",e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);const t=e.offsetWidth;e.style.overflow="scroll";const i=document.createElement("div");i.style.width="100%",e.appendChild(i);const n=i.offsetWidth;return e.parentNode.removeChild(e),I=t-n,I};let w,H=1;var S={props:{visible:{type:Boolean,default:!1},openDelay:{},closeDelay:{},zIndex:{},modal:{type:Boolean,default:!1},modalFade:{type:Boolean,default:!0},modalClass:{},modalAppendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!1}},beforeMount(){this._popupId="popup-"+H++,L.register(this._popupId,this)},beforeDestroy(){L.deregister(this._popupId),L.closeModal(this._popupId),this.restoreBodyStyle()},data(){return{opened:!1,bodyPaddingRight:null,computedBodyPaddingRight:0,withoutHiddenClass:!0,rendered:!1}},watch:{visible(e){if(e){if(this._opening)return;this.rendered?this.open():(this.rendered=!0,r["default"].nextTick(()=>{this.open()}))}else this.close()}},methods:{open(e){this.rendered||(this.rendered=!0);const t=d({},this.$props||this,e);this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null),clearTimeout(this._openTimer);const i=Number(t.openDelay);i>0?this._openTimer=setTimeout(()=>{this._openTimer=null,this.doOpen(t)},i):this.doOpen(t)},doOpen(e){if(this.$isServer)return;if(this.willOpen&&!this.willOpen())return;if(this.opened)return;this._opening=!0;const t=this.$el,i=e.modal,n=e.zIndex;if(n&&(L.zIndex=n),i&&(this._closing&&(L.closeModal(this._popupId),this._closing=!1),L.openModal(this._popupId,L.nextZIndex(),this.modalAppendToBody?void 0:t,e.modalClass,e.modalFade),e.lockScroll)){this.withoutHiddenClass=!g(document.body,"el-popup-parent--hidden"),this.withoutHiddenClass&&(this.bodyPaddingRight=document.body.style.paddingRight,this.computedBodyPaddingRight=parseInt(y(document.body,"paddingRight"),10)),w=T();let e=document.documentElement.clientHeight<document.body.scrollHeight,t=y(document.body,"overflowY");w>0&&(e||"scroll"===t)&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.computedBodyPaddingRight+w+"px"),v(document.body,"el-popup-parent--hidden")}"static"===getComputedStyle(t).position&&(t.style.position="absolute"),t.style.zIndex=L.nextZIndex(),this.opened=!0,this.onOpen&&this.onOpen(),this.doAfterOpen()},doAfterOpen(){this._opening=!1},close(){if(this.willClose&&!this.willClose())return;null!==this._openTimer&&(clearTimeout(this._openTimer),this._openTimer=null),clearTimeout(this._closeTimer);const e=Number(this.closeDelay);e>0?this._closeTimer=setTimeout(()=>{this._closeTimer=null,this.doClose()},e):this.doClose()},doClose(){this._closing=!0,this.onClose&&this.onClose(),this.lockScroll&&setTimeout(this.restoreBodyStyle,200),this.opened=!1,this.doAfterClose()},doAfterClose(){L.closeModal(this._popupId),this._closing=!1},restoreBodyStyle(){this.modal&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.bodyPaddingRight,A(document.body,"el-popup-parent--hidden")),this.withoutHiddenClass=!0}}};Object.prototype.hasOwnProperty;var _={mounted(){},methods:{getMigratingConfig(){return{props:{},events:{}}}}};function V(e,t,i){this.$children.forEach(n=>{var o=n.$options.componentName;o===e?n.$emit.apply(n,[t].concat(i)):V.apply(n,[e,t].concat([i]))})}var U={methods:{dispatch(e,t,i){var n=this.$parent||this.$root,o=n.$options.componentName;while(n&&(!o||o!==e))n=n.$parent,n&&(o=n.$options.componentName);n&&n.$emit.apply(n,[t].concat(i))},broadcast(e,t,i){V.call(this,e,t,i)}}},F={name:"ElDialog",mixins:[S,U,_],props:{title:{type:String,default:""},modal:{type:Boolean,default:!0},modalAppendToBody:{type:Boolean,default:!0},appendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},width:String,fullscreen:Boolean,customClass:{type:String,default:""},top:{type:String,default:"15vh"},beforeClose:Function,center:{type:Boolean,default:!1}},data:function(){return{closed:!1}},watch:{visible:function(e){var t=this;e?(this.closed=!1,this.$emit("open"),this.$el.addEventListener("scroll",this.updatePopper),this.$nextTick(function(){t.$refs.dialog.scrollTop=0}),this.appendToBody&&document.body.appendChild(this.$el)):(this.$el.removeEventListener("scroll",this.updatePopper),this.closed||this.$emit("close"))}},computed:{style:function(){var e={};return this.fullscreen||(e.marginTop=this.top,this.width&&(e.width=this.width)),e}},methods:{getMigratingConfig:function(){return{props:{size:"size is removed."}}},handleWrapperClick:function(){this.closeOnClickModal&&this.handleClose()},handleClose:function(){"function"===typeof this.beforeClose?this.beforeClose(this.hide):this.hide()},hide:function(e){!1!==e&&(this.$emit("update:visible",!1),this.$emit("close"),this.closed=!0)},updatePopper:function(){this.broadcast("ElSelectDropdown","updatePopper"),this.broadcast("ElDropdownMenu","updatePopper")},afterEnter:function(){this.$emit("opened")},afterLeave:function(){this.$emit("closed")}},mounted:function(){this.visible&&(this.rendered=!0,this.open(),this.appendToBody&&document.body.appendChild(this.$el))},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},P=F,M=i("2877"),R=Object(M["a"])(P,s,l,!1,null,null,null),j=R.exports,z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",{staticClass:"el-button",class:[e.type?"el-button--"+e.type:"",e.buttonSize?"el-button--"+e.buttonSize:"",{"is-disabled":e.buttonDisabled,"is-loading":e.loading,"is-plain":e.plain,"is-round":e.round,"is-circle":e.circle}],attrs:{disabled:e.buttonDisabled||e.loading,autofocus:e.autofocus,type:e.nativeType},on:{click:e.handleClick}},[e.loading?i("i",{staticClass:"el-icon-loading"}):e._e(),e.icon&&!e.loading?i("i",{class:e.icon}):e._e(),e.$slots.default?i("span",[e._t("default")],2):e._e()])},O=[],$={name:"ElButton",inject:{elForm:{default:""},elFormItem:{default:""}},props:{type:{type:String,default:"default"},size:String,icon:{type:String,default:""},nativeType:{type:String,default:"button"},loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},buttonSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},buttonDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},methods:{handleClick:function(e){this.$emit("click",e)}}},N=$,K=Object(M["a"])(N,z,O,!1,null,null,null),X=K.exports,Y={components:{ElButton:X,ElDialog:j},name:"home",data:function(){return{userId:"1952136480414555",region:"cn-shanghai",searchKey:"",videoListModel:[],loading:!1,videoTypes:[],heatColors:["#F64A4A","#F64A4A","#F64A4A"],activeLib:"video",activeVideoType:"list",toUploadList:[],uploadings:[],showUploadDialog:!1}},created:function(){this.getVideoTypes(),this.getVideoList()},methods:{playVideo:function(e){this.$store.commit("setVideoInfo",e),this.$router.push({path:"/main/videoPlaying",query:{id:e.id}})},getVideoTypes:function(){var e=this;this.$http.get("/videoTypes").then(function(t){"success"===t.data.code&&(e.videoTypes=t.data.data)})},getVideoList:function(){var e=this;this.loading=!0;var t={queryConds:[],sortConds:[{sortFieldName:"heat",sortRule:"ASC"}],videoKind:"material"};t.queryConds.push({key:"filterStr",value:this.searchKey}),this.$http.post("/videoinfo/filters",t).then(function(t){"success"===t.data.code?(e.videoListModel=t.data.data.videoInfos,e.loading=!1):(e.$notify({title:"获取视频列表错误",type:"error",message:t.data.msg}),e.loading=!1)}).catch(function(t){e.loading=!1,e.$notify({title:"获取视频列表错误",type:"error",message:t.message})})},transTime:function(e){return a["b"].formatTime(e.duration)},getMarkedList:function(){var e=this;this.loading=!0,this.$http.get("/favoriteInfos").then(function(t){"success"===t.data.code&&(e.videoListModel=[],e.loading=!1,t.data.data.forEach(function(t){var i="/videoinfo/"+t.videoId;e.$http.get(i).then(function(t){"success"===t.data.code&&e.videoListModel.push(t.data.data)})}))})},getPictureList:function(){var e=this;this.loading=!0,this.$http.get("/pictureInfos").then(function(t){e.videoListModel=t.data.data,e.loading=!1})},handleClick:function(){"video"===this.activeName?this.getVideoList():"marked"===this.activeName?this.getMarkedList():this.getPictureList()},clickInput:function(){this.$refs.videoUploader.dispatchEvent(new MouseEvent("click"))},getUploadInfo:function(){this.$http.get("/videoinfo/uploadtoken").then(function(e){console.log(e)})},filesChange:function(e){for(var t=e.target.files,i=0;i<t.length;i++)t[i].cateId=this.videoTypes[0].cateId,this.toUploadList.push(t[i])},toggleUploadDialog:function(){this.showUploadDialog=!this.showUploadDialog,this.showUploadDialog&&(this.toUploadList=[])},handleDelete:function(e,t){this.toUploadList.splice(e,1)},changType:function(e,t,i){t.cateId=e,this.$set(this.toUploadList,i,t)},addUpload:function(){this.toggleUploadDialog();while(this.toUploadList.length>=1){var e=this.toUploadList.shift(),t=Object.create(null);t.name=e.name,t.size=e.size,t.type=e.type,t.cateId=e.cateId,t.percentage=0,this.createUploader(t),this.uploadings.push(t),t.uploader.addFile(e),t.uploader.startUpload()}},createUploader:function(e){var t=this;e.uploader=new AliyunUpload.Vod({timeout:6e4,partSize:1048576,parallel:5,retryCount:3,retryDuration:2,region:this.region,userId:this.userId,addFileSuccess:function(e){console.log("添加文件成功"+e.file.name)},onUploadstarted:function(i){var n={action:"CreateUploadVideo",cateId:e.cateId,description:"",fileName:e.name,title:e.name};console.log("文件开始上传"),t.$http.post("/videoinfo/uploadtoken",n).then(function(t){if("success"===t.data.code){var n=t.data.data;e.uploader.setUploadAuthAndAddress(i,n.uploadAuth,n.uploadAddress,n.videoId)}})},onUploadSucceed:function(i){e.isSuccess=!0;var n=t.uploadings.indexOf(e);-1!==n&&t.$set(t.uploadings,n,e)},onUploadProgress:function(i,n,o){console.log("onUploadProgress:file:"+i.file.name+", fileSize:"+n+", percent:"+Math.ceil(100*o)+"%"),e.percentage=Math.ceil(100*o);var a=t.uploadings.indexOf(e);-1!==a&&t.$set(t.uploadings,a,e)},onUploadFailed:function(e,t,i){console.log("onUploadFailed: file:"+e.file.name+",code:"+t+", message:"+i)},onUploadTokenExpired:function(e){console.log("文件超时...")},onUploadEnd:function(e){console.log("onUploadEnd: uploaded all the files")}})}},computed:{}},q=Y,W=(i("9ac6"),Object(M["a"])(q,n,o,!1,null,"b1113674",null));t["default"]=W.exports},7734:function(e,t,i){"use strict";i.d(t,"a",function(){return n}),t["b"]={formatTime:function(e){var t,i,n;if(e=parseInt(e),e<60)return n=e<10?"0"+e:e,"00:00:"+n;if(e>=60&&e<3600)return n=e%60,i=(e-n)/60,n=n<10?"0"+n:n,i=i<10?"0"+i:i,"00:"+i+":"+n;var o=e%3600;return t=(e-o)/3600,n=o%60,i=(o-n)/60,t=t<10?"0"+t:t,i=i<10?"0"+i:i,n=n<10?"0"+n:n,t+":"+i+":"+n}};var n={Uploading:"上传中",UploadFail:"上传失败",UploadSucc:"上传完成",Transcoding:"转码中",TranscodeFail:"转码失败",Checking:"审核中",Blocked:"屏蔽",Normal:"正常"}},"82ac":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page-wrapper"},[i("div",{staticClass:"filter-wrapper"},[i("div",{staticClass:"search-wrapper"},[i("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入要查找的关键字"},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}},[i("i",{staticClass:"el-icon-search",attrs:{slot:"prepend"},slot:"prepend"}),i("el-button",{attrs:{slot:"append"},on:{click:e.getVideoList},slot:"append"},[e._v("确认")])],1)],1)]),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table-wrapper",staticStyle:{margin:"15px"}},[i("el-table",{ref:"videoTable",staticStyle:{width:"100%"},attrs:{data:e.videoListModel},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),i("el-table-column",{attrs:{label:"视频名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticStyle:{display:"flex"}},[i("div",{staticStyle:{width:"90px",height:"60px"}},[i("img",{staticStyle:{height:"100%",width:"100%"},attrs:{src:t.row.coverUrl}})]),i("div",{staticStyle:{"margin-left":"10px"}},[i("div",{staticStyle:{color:"#333","font-size":"16px"}},[i("span",[e._v(e._s(t.row.title))])]),i("div",[i("span",[e._v(e._s(e.transTime(t.row.duration)))])])])])]}}])}),i("el-table-column",{attrs:{label:"视频状态",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.statusMap[t.row.status]))])]}}])}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"medium"},on:{click:function(i){return e.platformExamine(t.row)}}},[e._v("智能审核")]),i("el-button",{attrs:{size:"medium"},on:{click:function(i){return e.selfExamine(t.row)}}},[e._v("自主审核")])]}}])})],1)],1),i("el-dialog",{attrs:{title:"填写审核报告",visible:e.addingExamineReport,width:"30%",center:""},on:{"update:visible":function(t){e.addingExamineReport=t}}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingExamineInfo,expression:"loadingExamineInfo"}]},[e.examineInfo?[i("div",{staticClass:"platform"},[i("div",{staticClass:"title"},[e._v("平台智能审核（共5分）")]),i("div",{staticClass:"items"},e._l(e.platExamineItems,function(t){return i("div",{staticClass:"item"},[i("div",[i("span",[e._v(e._s(t.info))])]),i("div",{staticClass:"record"},[i("span",[e._v(e._s(e.examineInfo[t.key])+"分")])])])}),0)]),i("div",{staticClass:"self"},[i("div",{staticClass:"title"},[e._v("学生自主审核（共4分）")]),i("div",{staticClass:"items"},e._l(e.selfExamineKeys,function(t){return i("div",{staticClass:"item"},[i("div",[i("span",{staticClass:"left-text"},[e._v(e._s(t.info))])]),i("div",[i("el-radio",{attrs:{label:0},model:{value:e.examineInfo[t.key],callback:function(i){e.$set(e.examineInfo,t.key,i)},expression:"examineInfo[item.key]"}},[e._v("否")]),i("el-radio",{attrs:{label:1},model:{value:e.examineInfo[t.key],callback:function(i){e.$set(e.examineInfo,t.key,i)},expression:"examineInfo[item.key]"}},[e._v("是")])],1),i("div",{staticClass:"record"},[i("span",[e._v(e._s(e.examineInfo[t.key])+"分")])])])}),0)])]:e._e()],2),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.addingExamineReport=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary",loading:e.submittingExamineReport},on:{click:e.submitExamineReport}},[e._v("提交")])],1)])],1)},o=[],a=(i("456d"),i("ac6a"),i("7734")),s={name:"home",data:function(){return{searchKey:"",videoListModel:[],loading:!1,heatColors:["#F64A4A","#F64A4A","#F64A4A"],statusMap:a["a"],timeoutHandler:null,addingExamineReport:!1,platExamineItems:[{key:"platAd",info:"视频广告识别"},{key:"platLive",info:"视频不良场景识别"},{key:"platLogo",info:"视频LOGO识别"},{key:"platPorn",info:"视频智能鉴黄"},{key:"platTerrorism",info:"视频涉恐是识别"}],selfExamineKeys:[{key:"userBeginning",info:"是否有片头"},{key:"userTitle",info:"视频是否有标题"},{key:"userSubtitle",info:"视频是否有子标题"},{key:"userSubtitleMatch",info:"视频是否与主题对应"}],loadingExamineInfo:!1,examineInfo:{id:0,platAd:0,platLive:0,platLogo:0,platPorn:0,platTerrorism:0,userBeginning:0,userSubtitle:0,userSubtitleMatch:0,userTitle:0,videoId:"",userName:""},currentReportVideo:"",submittingExamineReport:!1}},created:function(){this.refreshList()},methods:{getVideoList:function(){var e=this;this.loading=!0;var t={queryConds:[],sortConds:[{sortFieldName:"heat",sortRule:"ASC"}],videoKind:"pri"};t.queryConds.push({key:"filterStr",value:this.searchKey}),this.$http.post("/videoinfo/filters",t).then(function(t){"success"===t.data.code?(e.videoListModel=t.data.data.videoInfos,e.loading=!1):(e.$notify({title:"获取视频列表错误",type:"error",message:t.data.msg}),e.loading=!1)}).catch(function(t){e.loading=!1,e.$notify({title:"获取视频列表错误",type:"error",message:t.message})})},syncAliyun:function(){this.$http.post("/videoinfo/syncFromAliyun")},transTime:function(e){return a["b"].formatTime(e)},handleSelectionChange:function(e){},refreshList:function(){var e=this;this.getVideoList(),this.timeoutHandler=setTimeout(function(){e.refreshList()},6e4)},platformExamine:function(e){this.$http.post("/videoinfo/checks",e)},getExamineInfo:function(e){var t=this;this.loadingExamineInfo=!0;var i="/reviewreports?videoId=".concat(e);this.$http.get(i).then(function(e){if("success"===e.data.code){var i={id:0,platAd:1,platLive:1,platLogo:0,platPorn:1,platTerrorism:0,userBeginning:0,userName:"string",userSubtitle:0,userSubtitleMatch:0,userTitle:0,videoId:""};i?Object.keys(i).forEach(function(e){t.examineInfo[e]=i[e]}):(t.$notify({title:"未获取到智能审核信息",type:"warning",message:"请先提交智能审核"}),t.addingExamineReport=!1),t.loadingExamineInfo=!1}else t.loadingExamineInfo=!1,t.addingExamineReport=!1,t.$notify({title:"获取智能审核信息错误",type:"error",message:e.data.msg})}).catch(function(e){t.loadingExamineInfo=!1,t.addingExamineReport=!1,t.$notify({title:"获取智能审核信息错误",type:"error",message:e.message})})},selfExamine:function(e){this.currentReportVideo=e,this.addingExamineReport=!0,this.getExamineInfo(e.videoId)},submitExamineReport:function(){var e=this;this.submittingExamineReport=!0,this.examineInfo.id=this.currentReportVideo.id,this.examineInfo.videoId=this.currentReportVideo.videoId,this.examineInfo.userName=localStorage.getItem("user"),this.$http.post("/reviewreports",this.examineInfo).then(function(t){"success"===t.data.code&&(e.submittingExamineReport=!1,e.addingExamineReport=!1,e.$notify({title:"自主审核成功",type:"success"}))})}},destroyed:function(){this.timeoutHandler&&clearTimeout(this.timeoutHandler)}},l=s,r=(i("9016"),i("2877")),d=Object(r["a"])(l,n,o,!1,null,"34c128cb",null);t["default"]=d.exports},"85f2":function(e,t,i){e.exports=i("454f")},"8aae":function(e,t,i){i("32a6"),e.exports=i("584a").Object.keys},9016:function(e,t,i){"use strict";var n=i("1d7c"),o=i.n(n);o.a},"99b3":function(e,t,i){"use strict";var n=i("2c5a"),o=i.n(n);o.a},"9ac6":function(e,t,i){"use strict";var n=i("f241"),o=i.n(n);o.a},"9e1e5":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAAiCAMAAAD1eQAHAAACOlBMVEVHcExwcHB4d3d5eHh5eHh5eHh5eHgAAAB5eHiAgIB5d3dxcXF5eHh5eHh0dHRmZmZ5eHh3d3d5eHh3d3d5eHh4eHhtbW1tbW15eHh5eHh5eHh5eHh5d3d4eHh6enp4d3d5eXl5d3d5d3d5eHh4eHh5d3d2dnZ3d3d4eHh4eHiAgIB4eHh4eHh5eHh4eHh4eHiAgIB5d3d5d3d5eHiAgIB5eHh5eHh5d3d5eXl5d3dzc3N4d3d1dXV3d3d5eHh4eHh4eHh4eHh5eXl6enp5eHh5eHh5eXl3d3d5eHh4eHh5eHh7d3d5eHh5d3d5eHh5eXl4eHh5eXl5eXl4eHh6d3d4eHh4eHh5eHiAbW15eXlmZmZ6dnZ4dnZ5eHhVVVV6enp4eHiAgICAamp4eHh1dXV6dnZ4dnZ5d3d6eHgAAACAcHB5eHh4eHh6eHh5eXl5eXl4eHh6eHh6enp5d3d4eHh4eHh5eXl3d3d4eHh5eXl4eHh3d3d2dnZ4eHh5eXl5eXl1dXV4d3d2dnZ5d3d0dHR5eXl4eHh4eHh3d3d5d3d5dXV5eHh4eHh4eHh5eHhxcXF3d3d4eHh5d3d4eHh2dnZ5d3d5eXl2dnZ5eXl3d3d5d3d6enp5eHh5eHh4eHiAgIB4eHh4d3d4eHh4eHh5eXl5eHh4eHh5eHh6enpzc3N5dnZ6eHh6d3d4eHh4eHh4d3d3d3d5eHhzc3N4d3d4d3d5d3d5eXl4c3N4eHh6eHh3d3d5eHh5d3d5eHiSj2w2AAAAvXRSTlMAEP7w9fb9AfcC7wnzkRYF/g/5HuYRDgfq+N/oz4YX6yiLrfGO7RotsCAQnfb8jCQOeJTdBvL0hxOeH/owWtPIfzGBGaLuqT7ZU/o+yH7OFfpfOVVvyln7DnoKQ33XAy7FDAyEGEWMg+sCEOzY2IVwiHMsp5ORq1yQpaQrHNAmyyP2KZohlp/yR487oKNAkxJLmZKoNJaSOHhNrzDSuXsERuWKd97kRNtWFFRxWNlXxzrENeeuhUwzsqxJwLgkzbnXAAAB30lEQVQ4y2NgQAV8hnZzZvAxEAZ88xaysRnbmhBUKJcusXfvXg49A0IKU/Iy9oJUGmkRUKhWkA1SuJeVlxG/QmEV1b1EqWyZxAVRuFenQhCfwoZWZqjCvSx6YrjVses3t8MU7uXQVhDlzsShsE7bFK5wr65xWUl+qmYiOxaF1d08e5EAmzUrV46Gr7coulr2okqWvRggXFlGJSgJRSGnTTEWhUAgwCITKcyJpHCKEsdeHECAy82dH6bQZPosyb24QYBPMDdU5cy5QnvxAbbYwCiIymmme/EDJo8wcbDKBRochJT6RYO9NX/25EYCSr2UFCChqV5lRkApc3IWRGlTGw8BpbkdnNDkMVEZv0qOqSuhQaXZx4xXpcDyZbAkIFzKhZSWROprpeSZWYSY4EJm5hawqKpJU0XY1dPbNaG8UNHFXpoHqphp/SZEdpOVh6d5RQMGTn5uQWdHT9lQVzaw2GZbpLzuJAHLR52wfBQXER+SAA4Y5q3I5YeDNJa8ya1uvgRorPUe5ITqHyOCLRczrtgotFfADiVNWxiKYCtD+Dds4dgrhZpP+hcvBZm5CC0Xc9rsFJJAy1Kiq6UkJdeu4kfPadt3c6FnU7E1lpbrMAsbzl07MMTErazEsZQIgtsAqByv9tXwSQsAAAAASUVORK5CYII="},a18a:function(e,t,i){"use strict";var n=i("6383"),o=i.n(n);o.a},a4bb:function(e,t,i){e.exports=i("8aae")},ac6a:function(e,t,i){for(var n=i("cadf"),o=i("0d58"),a=i("2aba"),s=i("7726"),l=i("32e9"),r=i("84f2"),d=i("2b4c"),c=d("iterator"),u=d("toStringTag"),p=r.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=o(h),m=0;m<f.length;m++){var g,v=f[m],A=h[v],y=s[v],E=y&&y.prototype;if(E&&(E[c]||l(E,c,p),E[u]||l(E,u,v),r[v]=p,A))for(g in n)E[g]||a(E,g,n[g],!0)}},b048:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAYCAYAAABurXSEAAACuElEQVRYR+2YTUhUURTHf+c5M88PLGfUxsaRDBpIclW0qIiKglaJYVSLrEYsWgUtW7SoXa1btW3TomhVCFFCH9i+QiglQ32i6IxOuFBn3ok7QyA2Os9p8G28i/fgce7//Phz7r3vXAGYoL7RInBW4JzCYUXC5ruAmvf/DM3L5B+LwDdFXtnwsom5yXJ1xQBD4JYF/SBRoKZcsdLzdAUkpehzkIcxUhNejFGwxiDUDssCrjiEb4LcA+Klk1YsYgH08SLyKEEqs57qIAQSRFoE9xBIG/BLyA7JFJG3ip4AqaoYkgchhS8u2Z42Mj+KhRdKNnhSoA846EK1oAsCz8QhMg3s8pCn0iGToJdjpD+uFnagVmjsVNykIF2KRlcbKuiIgU4B+YW3lUPAyZHrjbPwzuQ1pbCfhjhYFxS9BrIPqC7CNGWgZ4HGrQQ2uRSM05daSX8aZ0dECJy2IAkcARo24Bn3DRoYB/eKwm+QfgvpXlsKxcAV/ITWOWAA6ADp8LrV+g3tgiwDduHs8TZ8hvYGuTZqG7o83zY/a9vpzXuGC2oWY2Azc/12Og36WSAB7FEk6AXeV2iTvIpcMgtUYd1QOAMSKbX9+Q2dP8ZjpIdmqY0uYXdbyHXgAFC3nut/oX37YTLH+G7mBw3gT6gOEE5Y0CtwEWgtVu8KjmkCZkCavdRTJWPyyQu/ph9W644S3lkLRxXpAz31b8nomIF+D3IMsCoJ5UFrGKQnxtxwkVPPMiWzgt0lSNJFE4LYAqbjeSEODbfBugu0eEhUqRDT5D6pwX0QZn5+g/q1HerbIXhc0L2Cfl9h+Y1MUxd1Cd1R5KqgTV63nvLo1VUwLdPrHLn7cTIjXhrbrxCK0mRPM7vUWWhuYYa6lhyhHpDzCgkB29wdeBEsBW+uEEwSF7ICkwoDQbJPm8mMlqv/B5C2/8AK2OhNAAAAAElFTkSuQmCC"},bf90:function(e,t,i){var n=i("36c3"),o=i("bf0b").f;i("ce7e")("getOwnPropertyDescriptor",function(){return function(e,t){return o(n(e),t)}})},c716:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"100%"}},[n("div",{staticClass:"play-header"},[n("div",{staticClass:"title"},[n("img",{attrs:{src:i("50d1")}}),n("span",{staticClass:"text-in-red"},[e._v("正在观看:")]),n("span",[e._v(e._s(e.videoInfo.title))])]),n("div",{staticClass:"operation"},[n("div",{staticClass:"mark",on:{click:e.handleMark}},[n("img",{attrs:{src:i("e420")}})]),n("div",{staticClass:"go-back",on:{click:e.goBckToVideoList}},[n("img",{attrs:{src:i("9e1e5")}})])])]),n("div",{staticClass:"play-content"},[e._m(0),n("div",{staticClass:"info-note"},[n("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleTabsChange},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[n("el-tab-pane",{attrs:{label:"课程详情",name:"info"}},[n("div",[n("h4",[e._v(e._s(e.videoInfo.title))])]),n("div",{staticStyle:{width:"100%"}},[n("img",{staticStyle:{width:"100%"},attrs:{src:e.videoInfo.coverUrl}})])]),n("el-tab-pane",{attrs:{label:"学习笔记",name:"note"}},[n("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.note,callback:function(t){e.note=t},expression:"note"}}),n("div",{staticClass:"add-note"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit-outline",loading:e.addingNote},on:{click:e.addNote}},[e._v("加入笔记")])],1),n("div",{staticClass:"note-timeline"},[n("el-timeline",e._l(e.notes,function(t){return n("el-timeline-item",{key:t.time,attrs:{timestamp:e.formateTime(t.time),placement:"top"}},[n("el-card",[n("p",[e._v(e._s(t.info))])])],1)}),1)],1)],1)],1)],1)])])},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"player-wrapper"},[i("div",{attrs:{id:"player"}})])}],a=(i("55dd"),i("cebc")),s=i("2f62"),l=i("7734"),r={name:"video-editor",data:function(){return{activeTab:"note",notes:"",note:"",currentPlayingTime:0,player:null,isMarked:!1,addingNote:!1,reverse:!0}},created:function(){this.videoInfo.id?(this.getNoteById(),this.getMarkInfo()):this.goBckToVideoList()},computed:Object(a["a"])({},Object(s["b"])(["videoInfo"])),mounted:function(){var e=this,t={id:"player",width:"100%",height:"485px",autoplay:!0,controlBarVisibility:"always",rePlay:!0,source:this.videoInfo.url,cover:this.videoInfo.CoverURL};this.player||(this.player=new Aliplayer(t),this.player.on("timeupdate",function(t){e.currentPlayingTime=e.player.getCurrentTime()}))},methods:{handleTabsChange:function(e){},goBckToVideoList:function(){this.$router.push("videoList")},getNoteById:function(){var e=this,t="/studyrecords?videoId="+this.videoInfo.videoId;this.$http.get(t).then(function(t){"success"===t.data.code?(e.notes=t.data.data.sort(function(e,t){return parseInt(t.time)-parseInt(e.time)}),console.log(e.note)):e.$notify({title:"获取笔记失败",type:"error",message:t.data.msg})}).catch(function(t){e.$notify({title:"获取笔记失败",type:"error",message:t.message})})},formateTime:function(e){return l["b"].formatTime(e)},addNote:function(){var e=this;this.addingNote=!0;var t={id:this.videoInfo.id,info:this.note,time:this.currentPlayingTime,userName:localStorage.getItem("user"),videoId:this.videoInfo.videoId};this.$http.post("/studyrecords",t).then(function(t){"success"===t.data.code?(e.note="",e.getNoteById(),e.addingNote=!1):(e.$notify({title:"添加笔记失败",type:"error",message:t.data.msg}),e.addingNote=!1)}).catch(function(t){e.$notify({title:"添加笔记失败",type:"error",message:t.message}),e.addingNote=!1})},handleMark:function(){this.isMarked?this.unMark():this.mark()},mark:function(){var e=this,t={userName:localStorage.getItem("user"),videoId:this.videoInfo.videoId,id:this.videoInfo.id,createTime:this.videoInfo.creatTime};this.$http.post("/favoriteInfos",t).then(function(t){"success"===t.data.code?(e.isMarked=!0,e.$notify({title:"收藏成功",type:"success"})):e.$notify({title:"收藏失败",type:"error",message:t.data.msg})})},unMark:function(){var e=this,t="/favoriteInfos/"+this.videoInfo.videoId;this.$http.delete(t).then(function(t){"success"===t.data.code?(e.isMarked=!1,e.$notify({title:"取消收藏成功",type:"success"})):e.$notify({title:"取消收藏失败",type:"error",message:t.data.msg})})},getMarkInfo:function(){var e=this,t="/isfavorite?videoId=".concat(this.videoInfo.videoId);this.$http.get(t).then(function(t){"success"===t.data.code&&(e.isMarked=t.data.data.isFavorite)})}}},d=r,c=(i("f0ae"),i("2877")),u=Object(c["a"])(d,n,o,!1,null,"03c4bb3a",null);t["default"]=u.exports},ce7e:function(e,t,i){var n=i("63b6"),o=i("584a"),a=i("294c");e.exports=function(e,t){var i=(o.Object||{})[e]||Object[e],s={};s[e]=t(i),n(n.S+n.F*a(function(){i(1)}),"Object",s)}},cebc:function(e,t,i){"use strict";var n=i("268f"),o=i.n(n),a=i("e265"),s=i.n(a),l=i("a4bb"),r=i.n(l),d=i("85f2"),c=i.n(d);function u(e,t,i){return t in e?c()(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function p(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=r()(i);"function"===typeof s.a&&(n=n.concat(s()(i).filter(function(e){return o()(i,e).enumerable}))),n.forEach(function(t){u(e,t,i[t])})}return e}i.d(t,"a",function(){return p})},db82:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page-wrapper"},[i("div",{staticClass:"filter-wrapper"},[i("div",{staticClass:"search-wrapper"},[i("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入要查找的关键字"},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}},[i("i",{staticClass:"el-icon-search",attrs:{slot:"prepend"},slot:"prepend"}),i("el-button",{attrs:{slot:"append"},on:{click:e.getVideoList},slot:"append"},[e._v("确认")])],1)],1),i("div",{staticClass:"video-type"},[i("el-select",{attrs:{clearable:"",placeholder:"请选择视频类型"},on:{change:e.getVideoList},model:{value:e.selectedVideoType,callback:function(t){e.selectedVideoType=t},expression:"selectedVideoType"}},e._l(e.videoTypes,function(e){return i("el-option",{key:e.cateId,attrs:{label:e.cateName,value:e.cateId}})}),1)],1),i("div",{staticClass:"video-sort sort-by-heat"},[e._v("按热度\n            "),i("span",{staticClass:"caret-wrapper"},[i("i",{staticClass:"sort-caret ascending",class:"ASC"===e.heatSelected?"ASC":"",on:{click:function(t){return e.toggleHeat("ascending")}}}),i("i",{staticClass:"sort-caret descending",class:"DESC"===e.heatSelected?"DESC":"",on:{click:function(t){return e.toggleHeat("descending")}}})])]),i("div",{staticClass:"video-sort sort-by-heat"},[e._v("按上传时间\n            "),i("span",{staticClass:"caret-wrapper"},[i("i",{staticClass:"sort-caret ascending",class:"ASC"===e.uploadTimeSelected?"ASC":"",on:{click:function(t){return e.toggleTime("ascending")}}}),i("i",{staticClass:"sort-caret descending",class:"DESC"===e.uploadTimeSelected?"DESC":"",on:{click:function(t){return e.toggleTime("descending")}}})])])]),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"video-list-wrapper"},e._l(e.videoListModel,function(t){return i("div",{staticClass:"video-list",on:{click:function(i){return e.playVideo(t)}}},[i("el-card",{staticClass:"video-card"},[i("div",{staticClass:"cover"},[i("img",{attrs:{src:t.coverUrl}})]),i("div",{staticClass:"title"},[i("span",[e._v(e._s(t.title))])]),i("div",{staticClass:"abstract"},[i("span",[e._v(e._s(t.abstract))])]),i("el-divider"),i("div",{staticClass:"info"},[i("div",{staticClass:"duration"},[i("i",{staticClass:"el-icon-time"}),i("span",[e._v(e._s(e.transTime(t)))])]),i("div",{staticClass:"heat"},[i("el-rate",{attrs:{disabled:"","show-score":"",colors:e.heatColors},model:{value:t.heat,callback:function(i){e.$set(t,"heat",i)},expression:"video.heat"}})],1)])],1)],1)}),0),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"","page-size":e.pageSize,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalVideos},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.handleCurrentChange}})],1)])},o=[],a=i("7734"),s={name:"home",data:function(){return{searchKey:"",videoListModel:[],loading:!1,heatColors:["#F64A4A","#F64A4A","#F64A4A"],pageSize:8,totalVideos:0,currentPage:1,videoTypes:[],selectedVideoType:"",heatSelected:"",uploadTimeSelected:""}},created:function(){this.getVideoTypes(),this.getVideoList()},methods:{playVideo:function(e){this.$store.commit("setVideoInfo",e),this.$router.push({path:"/main/videoPlaying",query:{id:e.id}})},getVideoList:function(){var e=this;this.loading=!0;var t={queryConds:[],sortConds:[{sortFieldName:"heat",sortRule:"ASC"}],videoKind:"pub"};t.pageNum=this.currentPage,t.perPageRecords=this.pageSize,t.queryConds.push({key:"filterStr",value:this.searchKey}),this.$http.post("/videoinfo/filters",t).then(function(t){"success"===t.data.code?(e.videoListModel=t.data.data.videoInfos,e.totalVideos=t.data.data.totalVideoNums,e.loading=!1):(e.$notify({title:"获取视频列表错误",type:"error",message:t.data.msg}),e.loading=!1)}).catch(function(t){e.loading=!1,e.$notify({title:"获取视频列表错误",type:"error",message:t.message})})},handleCurrentChange:function(){this.getVideoList()},transTime:function(e){return a["b"].formatTime(e.duration)},getVideoTypes:function(){var e=this;this.$http.get("/videoTypes").then(function(t){"success"===t.data.code&&(e.videoTypes=t.data.data)})},toggleHeat:function(e){"descending"===e?"DESC"===this.heatSelected?this.heatSelected="":this.heatSelected="DESC":"ASC"===this.heatSelected?this.heatSelected="":this.heatSelected="ASC"},toggleTime:function(e){"descending"===e?"DESC"===this.uploadTimeSelected?this.uploadTimeSelected="":this.uploadTimeSelected="DESC":"ASC"===this.uploadTimeSelected?this.uploadTimeSelected="":this.uploadTimeSelected="ASC"}}},l=s,r=(i("99b3"),i("2877")),d=Object(r["a"])(l,n,o,!1,null,"85a4ed14",null);t["default"]=d.exports},e265:function(e,t,i){e.exports=i("ed33")},e3d5:function(e,t,i){},e420:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAmCAMAAAB01KKfAAAClFBMVEVHcEzmABHmABL/AADjAADmABLmABLmABL/AADmABLfABDnABHmABHmABHmABLmABLoAA/mABLlABHwAA/nABLmABHmABLpAAvmABHUAADMAADmABLmABH/AADlABHqABXlABDmABGAAADhABLnABLmAA3mABHmABLnABL/AADdABHnAAz/AADlABLmABHnABLuABHnABLlABLjABHmABHmABHrAArmABLbAADoAAzlABHmABLmABHmABHlABLmABHfAADmABLmABHjAA7mABLlABHmABHmABHnABPnABDoAADmABHlABLlABHnABLlABL/AADkAA/nABLlABHmABDnABLoABHnABHmABPoABLmABHrABTmABHmAADmAAznABLmABHmABLgAArYABTmABLlABLkAA3nABDmABDlABHnABHnABHoAA/mABHmABLmABLmABHjAA7lABHbAADmABHnABHmABHmABHmABHmABHmABDlABDnABHnABHmABHlABLmABHoAA7mABLlABHmABLrAA3nABLkAA3mABLlABHmABLnABLrAArlABDlABDkABDnABLnABPlAA/lABLmABLmABLnABHmABLqAAvoABfmABLlABLoABHnABHmABHnABLlABLmABHmABHnABHlABHyAA3mABLnABHjAAnmABLnABHmABLmABHmABLmABLnABHiABHkABDoABHnABLmABHnABLpAA/lABHkABLkABHlAA3mABLlABH/AADlABLmABHmABHoABHmABDnABHnABLmABLmABHlABHmABHlABLmABDlABDmABHlABHoABPmABLlABHmABDnABHmABLlABLkABHlABLmABLmABLlABLnABHmABKsqm0JAAAA23RSTlMA6/YDCfPk/gH9EPpo+dX3IfFZEefe9Rf9BgX8+AXvDJ36AiuKFN+PKgIPFQSBvsgPp9ou3XkZxQcW+dT8zJ2FCKrTEunR+8M2XgvOHbPHZAhCfbFQnVnfKYOEDaEKKY2wkRkNb6gTIHA7kpYi3LnKPSXtDlrbweCi6oxtSrF45Wc3je70JoAmSGqZoBpOYmBUiDL2ukaKyxgLkICEdu/lRbU8qWwT1twbR2xxzcTi+ywwLJ6YKyPPVmkn6GsJx+yvLW+ovfDA+JY6UX+X7ETnkptJrNmF965l7t0deliQAAACGUlEQVQ4y2NgQAUcB09YHzjlwIAfcJ0WZT/quAu/Is1Ftpy3b+/mMcCrSlx33u3bt60WTsKniKPA3Aaoil2knwWPquKMotsgwKSgzIHbKI8ERbAqdtESWZyqHBrY2MGqbrc0meFU1d7ND1F0m1O/VweHIpZOI6hRt2+zqjtjCygWLtXGWkWYIqBhE3qE5ZHMY2aJTkvP9GzrKpO7jQCTnQxVqjvikrhmWgC9yyy+gEfXztedr16Q8zYyYGeqLM3Pc5w1V2grC8NJez0jRhlpTvbbWAA7J7fY/DWbhRjs9rthVYAAnEzmDHy3CQNBhmPHCatiYzjkJEFADbvIFgafPa42+BWVz9nIwCC8czs+09jDIwWUQImYZxkeX7LZC0AS0dJVJjiVMcYXwlKa2erlbtiDijFLA5EcxZdM58bmJjWVCCWkJKE9WwSLKv4Y1IRt0WeCRRVrVDJK8vKqa8ZmVrYwiiqtKjEsqnhTBVBUWYbKYFElrRfIjKzKOBirH639A5AUyYb4cWIN+CB5JFWxKblYQ19QHblY0ZrIiPC+ixw89q0qVJFUzTDkhYoziSYKmdqyQu3nnNKKFKwb1kIs5FVTCMuR0q6Z5i0GEXCdKolQtWkfSHD9usU8GiBR5hU7zvDxgoT4VkohBdeFs7c5zx8xNWaBWiDpc+P6Le7b1w5vQ3KX1LnLLlcuXnJGcoSXx1Xvm+6ee8EcABJFUzm34P8UAAAAAElFTkSuQmCC"},ed33:function(e,t,i){i("014b"),e.exports=i("584a").Object.getOwnPropertySymbols},f0ae:function(e,t,i){"use strict";var n=i("e3d5"),o=i.n(n);o.a},f241:function(e,t,i){},fde4:function(e,t,i){i("bf90");var n=i("584a").Object;e.exports=function(e,t){return n.getOwnPropertyDescriptor(e,t)}}}]);
//# sourceMappingURL=videoEidtor.7829b8c5.js.map